#include "stdafx.hpp"

#include "snake_overflow/invulnerability_potion.hpp"
#include "snake_overflow/invulnerability_spell.hpp"
#include "snake_overflow/snake.hpp"

namespace snake_overflow
{

invulnerability_potion::invulnerability_potion(position const placement, 
                                               game& parent_game,
                                               int const lifetime,
                                               int const spell_duration)
    : consumable_item{placement, parent_game, lifetime}
    , spell_duration{spell_duration}
{
}

void invulnerability_potion::handle_picking(snake& s)
{
    give_snake_invulnerability_spell(s);
}

void invulnerability_potion::give_snake_invulnerability_spell(snake& s) const
{
    auto sp = std::make_unique<invulnerability_spell>(this->spell_duration);

    s.add_spell(std::move(sp));
}

}
